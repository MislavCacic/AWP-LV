<!DOCTYPE html>
<html>
  <head>
    <title><%= title %></title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
    <style>
      table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
      }
      th, td {
        border: 1px solid #ddd;
        padding: 12px;
        text-align: left;
      }
      th {
        background-color: #757575;
        color: white;
      }
      tr:nth-child(even) {
        background-color: #f2f2f2;
      }
      tr {
        opacity: 0.8;
        background-color: #e0e0e0;
      }
      .btn {
        display: inline-block;
        padding: 6px 12px;
        margin: 2px;
        text-decoration: none;
        color: white;
        border-radius: 4px;
      }
      .btn-info {
        background-color: #2196F3;
      }
      .btn:hover {
        opacity: 0.8;
      }
      .navbar {
        background-color: #333;
        overflow: hidden;
        padding: 10px 20px;
        margin-bottom: 20px;
      }
      .navbar a {
        float: left;
        color: white;
        text-decoration: none;
        padding: 8px 16px;
        margin-right: 10px;
      }
      .navbar a:hover {
        background-color: #ddd;
        color: black;
      }
      .navbar-right {
        float: right;
      }
      .user-info {
        color: white;
        float: right;
        padding: 8px 16px;
      }
      .info-message {
        background-color: #f5f5f5;
        border-left: 4px solid #757575;
        padding: 15px;
        margin-bottom: 20px;
      }
      .role-badge {
        display: inline-block;
        padding: 4px 8px;
        border-radius: 3px;
        font-size: 0.85em;
        font-weight: bold;
      }
      .role-manager {
        background-color: #4CAF50;
        color: white;
      }
      .role-member {
        background-color: #2196F3;
        color: white;
      }
      .archive-icon {
        color: #999;
        margin-right: 5px;
      }
    </style>
  </head>
  <body>
    <div class="navbar">
      <a href="/projects">Svi projekti</a>
      <% if (user) { %>
        <a href="/projects/my/managed">Moji projekti (voditelj)</a>
        <a href="/projects/my/member">Moji projekti (ƒçlan)</a>
        <a href="/projects/archive">Arhiva</a>
        <span class="user-info">Prijavljeni ste kao: <strong><%= user.username %></strong></span>
        <a href="/users/logout" class="navbar-right">Odjava</a>
      <% } else { %>
        <a href="/users/login" class="navbar-right">Prijava</a>
        <a href="/users/register" class="navbar-right">Registracija</a>
      <% } %>
    </div>
    
    <h1><span class="archive-icon">üì¶</span><%= title %></h1>
    
    <div class="info-message">
      Ovdje se prikazuju svi arhivirani projekti na kojima ste bili voditelj ili ƒçlan tima.
    </div>

    <% if (projects.length === 0) { %>
      <p>Nemate arhiviranih projekata.</p>
    <% } else { %>
      <table>
        <thead>
          <tr>
            <th>Naziv</th>
            <th>Opis</th>
            <th>Voditelj</th>
            <th>Cijena (EUR)</th>
            <th>Datum poƒçetka</th>
            <th>Datum zavr≈°etka</th>
            <th>Va≈°a uloga</th>
            <th>Akcije</th>
          </tr>
        </thead>
        <tbody>
          <% projects.forEach(function(project) { %>
            <tr>
              <td><%= project.naziv %></td>
              <td><%= project.opis %></td>
              <td><%= project.voditeljName %></td>
              <td><%= project.cijena.toFixed(2) %></td>
              <td><%= project.datumPocetka %></td>
              <td><%= project.datumZavrsetka %></td>
              <td>
                <% if (project.userRole === 'Voditelj') { %>
                  <span class="role-badge role-manager">Voditelj</span>
                <% } else if (project.userRole === 'ƒålan') { %>
                  <span class="role-badge role-member">ƒålan</span>
                <% } %>
              </td>
              <td>
                <a href="/projects/<%= project.id %>" class="btn btn-info">Detalji</a>
              </td>
            </tr>
          <% }); %>
        </tbody>
      </table>
    <% } %>
  </body>
</html>
